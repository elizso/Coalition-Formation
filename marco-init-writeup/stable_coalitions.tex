\documentclass[11pt]{article}
\input{header} %GLOBAL HEADER FILE

%LOCAL HEADERS BELOW
\newcommand{\va}{V^{\textsf{A}}}
\newcommand{\vp}{V^{\textsf{P}}}
\newcommand{\vd}{V^{\textsf{D}}}
\newcommand{\multiset}[1]{[#1]}
%

%\boxdef, \boxthm, \boxlem, \boxcoro, \boxprop, \boxexample

%To refer to a paper, just write the authors name (if too many, just first author), and bracket the venue.
%e.g., Cheung, Cole and Devanur (STOC 2013), Cheung et al.~(SIDMA 2016)
%To add a hyperlink, \href{URL}{TEXT}

\begin{document}

\section{Model}

\subsection*{Symmetric Coalition-Competition Game}

\blue{[Now I just gave an arbitrary name for such game. We should search it has been given a name before, or see if we can propose a better name.]}

We consider a symmetric coalition-competition game of $n$ players, labeled from $1$ to $n$.
The game proceeds in two stages. In the first stage, the players form a number of coalitions.
A \red{coalition structure (CS)} is a partition of the players into one or more coalitions.
For instance, when $n=8$, some examples of CSs are $\{\{1,2,3\},\{4,5,6\},\{7,8\}\}$, $\{\{1,7\},\{2\},\{3,5,8\},\{4,6\}\}$,
and $\{\{1,2,3,4,5,6,7,8\}\}$. The last CS is where all players form one single coalition, which is usually called a \emph{grand coalition}.

Once a CS is formed, the game proceeds to the second stage, where each coalition effectively acts as a meta-player making decisions in a
\emph{reward system}.\footnote{Throughout this note, we use the terms ``coalition'' and ``meta-player'' interchangeably.}
In this note, we focus on reward systems modeled as non-cooperative games, such as Cournot competitions and Tullock contests,
that admit a unique Nash equilibrium determining the rewards to the meta-players.
More generally, a reward system might not be a game --- it could be a market with rewards determined at competitive equilibrium,
or it could be governed by externally imposed or even artificially constructed rules.
Each meta-player/coalition's reward is then divided equally among its member players.

In the symmetric game, all players are treated equally. As a result, two CSs that are equivalent up to a relabeling of players yield the same reward distribution.
Also, within a given CS, all players belonging to coalitions of the same size receive the same rewards.
For example, consider the two CSs $\{1,2,3\},\{4,5,6\},\{7,8\}$ and $\{1,3,7\},\{2,5,8\},\{4,6\}$ which are equivalent up to a relabeling of players.
The rewards received by players $1,2,3,4,5,6$ in the first CS are the same as those received by players $1,3,7,2,5,8$ in the second CS.
\blue{[Haiqing raised a good question about how this model differs from the standard cooperative game model underpinning Shapley and core values.
We should clarify this in a later version.]}

\boxexample{Suppose there are $8$ players forming a CS $\{\{1,7\},\{2\},\{3,5,8\},\{4,6\}\}$. The four meta-players then participate in a Cournot competition.
Let $x_i$ denote the quantity of goods produced by the $i$-th meta-player, and let $x = \sum_{i=1}^4 x_i$. The Cournot competition has a linear price curve:
each unit of good is sold for $p=14-8x$ dollars. Producing one unit of the good costs $2$ dollars.

The Cournot competition admits a unique Nash equilibrium, at which each meta-player produces $0.3$ unit of good, and receives a reward of $0.72$ dollar.
As the reward of each coalition is divided equally among its member players, 
player 2 receives $0.72$ dollar, players $1,7,4,6$ each receives $0.36$ dollar, and players $3,5,8$ each receives $0.24$ dollar.

Next, suppose the coalition $\{3,5,8\}$ is split into two coalitions $\{3\}$ and $\{5,8\}$. At the new Cournot equilibrium,
each of the five meta-players produces $0.25$ unit of good, and receives a reward of $0.5$ dollar.
Players $2,3$ each receives $0.5$ dollar, while each of the other players receive $0.25$ dollar.
Observe that player 3 receives more reward, but every other player receives less.}

Players aim to maximize their individual rewards and therefore act strategically when forming coalitions in the first stage.
We consider a dynamic model of coalition formation and characterize the conditions under which a CS is \emph{stable}.

\subsection*{Dynamic Betrayal Model}

In general, coalition formation dynamics can involve both splitting and merging of coalitions, making the analysis complex.
We focus on a simpler model in which only splitting is allowed. Initially, all players belong to a single grand coalition, which may undergo a sequence of splits.
This process continues until no player has an \emph{incentive} to leave her current coalition and form a smaller one; we will define incentive formally below.
In each coalition of size $i\ge 2$, there is a player who may initiate a \emph{betrayal}
by pulling at most $\floor{i/2}$ players (including herself) away from the rest of the coalition.
\blue{[We need to justify why setting $\floor{i/2}$ as a threshold, or saying this is arbitrary and can be adjusted with the context.]}
Before moving on, we present a simple example from Ray's book to demonstrate the concept of \emph{farsightedness} and how it determines stability of a CS.

\boxexample{\label{example:ray}There are $3$ players. The second stage of the coalition-competition game is a Cournot competition
with linear price curve $p = 14-x$ and production cost of $2$ dollars per unit. It is a standard exercise to show that if there are $m$ meta-players,
the reward of each meta-player at Nash equilibrium is $\frac{144}{(m+1)^2}$.

When the $3$ players form a grand coalition, the reward of each player is $\frac{144}{(1+1)^2}\times \frac 13 = 12$ dollars.
If a player betrays and form a new coalition by herself, the reward of this player becomes $\frac{144}{(2+1)^2} = 16$ dollars.
So, in \emph{short sight}, it would seem the player is motivated to betray.
However, if she considers the further response of the other two players -- a \emph{far-sight} consideration,
she would not betray. The reason is after her betrayal, each of the other two players receives reward of $\frac{144}{(2+1)^2}\times \frac 12 = 8$ dollars.
If the two players split, then each of them receives $\frac{144}{(3+1)^2} = 9$ dollars, which are more than $8$ dollars, so they are motivated to split.
After their split, the player who betrays the grand coalition receives $9$ dollars of reward,
which is less than $12$ dollars that she would receive if she stayed in the grand coalition.
To conclude, the far-sight consideration ensures no player would betray the grand coalition in first place, making the grand coalition stable.}

Due to the symmetry discussed above, when specifying the rewards of meta-players, we only need to distinguish CSs which are not equivalent upon relabeling.
A cleaner way to represent these non-equivalent CSs is using \red{integer partition (IP)} of the positive integer $n$.
An IP of $n$ is a multiset of positive integers whose sum is $n$.
For example, when $n=8$, some IPs are $\multiset{4,3,1}$, $\multiset{3,3,2}$, and $\multiset{2,2,2,1,1}$.
Each integer $i$ in an IP corresponds to one coalition of size $i$.
Our algorithm below will proceed by enumerating all IP of $n$, and computing certain \emph{value functions} for them.
A huge advantage of doing so is to avoid enumerating the set of CSs of $n$ players,
whose size is larger than $(\frac{n}{\log n})^n$, while the set of IPs of $n$ has a much smaller size of at most $e^{\Theta(\sqrt n)}$.

We will define two value functions $\vd,\vp$, which we call the \emph{default value function} and the \emph{pessimistic value function} respectively.
They will be used to define stable CSs. $\vd(S,i)$ is the reward received by any player in a size-$i$ coalition when the CS is fixed.
For instance, in \Cref{example:ray}, $\vd(\multiset{3},3) = 12$, $\vd(\multiset{2,1},1) = 16$, $\vd(\multiset{2,1},2) = 8$ and $\vd(\multiset{1,1,1},1) = 9$.

$\vp(S,i)$ is the \red{pessimistically anticipated reward (PAR)} a player in a size-$i$ coalition might eventually get,
after \emph{any} sequence of \emph{incentivized betrayals} by any players.
By incentivized betrayal, we refer to a betrayal initiated by a player such that her PAR with the new CS is strictly better than her default value with the current CS.
For instance, in \Cref{example:ray}, $\vp([2,1],1) = 9$, because the player in the singleton coalition anticipates that the other coalition is incentivized to split,
so the eventual reward she gets is her default reward with the IP $\multiset{1,1,1}$.

Since coalitions can only be split but not merged in the dynamic betrayal model, $\vp$ can be defined recursively.
Let $U$ be the IP $\multiset{1,1,\ldots,1}$, where $1$ occurs $n$ times.
This corresponds to the CS where each player forms a coalition by herself. Since no further betrayal can occur from $U$, $\vp(U,1) = \vd(U,1)$.
Then $\vp(S,i)$ for any IP $S\neq U$ and $i\in S$ will be defined recursively, going from IPs with the most number of coalitions to the least (the grand coalition).

Before moving on, we define a few notations which will help with simplifying our presentation:
\begin{itemize}[leftmargin=0.25in]
\item Given a multiset $S$ and $i\in S$, let $S-i$ denote the multiset formed by removing from $S$ one occurrence of $i$.
For example, when $S=\multiset{2,2,2,2,1}$, $S-2 = \multiset{2,2,2,1}$ and $S-1 = \multiset{2,2,2,2}$.
\item Given a multiset $S$, $i\in S$ and $1\le j<i$, let $\calB(S,i,j)$ denote the multiset formed by splitting one occurrence of $i$ in $S$ into $j$ and $i-j$.
For example, when $S=\multiset{5,5,2}$, $\calB(S,5,2) = \multiset{5,3,2,2}$.
\end{itemize}
%Given an IP $S$, $i\in S$ and $1\le j<i$, let $\calB(S,i,j)$ denote the IP formed after $j$ players in a size-$i$ coalition betray.
%For example, when $S=\multiset{5,5,2}$, $\calB(S,5,2) = \multiset{5,3,2,2}$. 

For any IP $S\neq U$ and $i\in S$, let
\[
\calM(S,i) ~:=~ \max_{1\le j \le \floor{i/2}} \vp(\calB(S,i,j),j)~,
\]
which is the PAR of a player in a size-$i$ coalition after she betrays by pulling $j$ players (including herself) away from her current coalition,
while she chooses the optimal $j$. The player is incentivized to betray only when $\calM(S,i)$ is strictly larger than her current default value,
and using ``maximin'' approach, she will choose one of the optimal $j$'s. Accordingly, we define the \red{$i$-betrayal-descendants of $S$} to be
\[
\calD(S,i) ~:=~ 
\begin{cases}
\left\{ \calB(S,i,j) ~\big|~ \vp(\calB(S,i,j),j) = \calM(S,i) \right\}, & \text{if } \calM(S,i) > \vd(S,i);\\
\emptyset, & \text{if } \calM(S,i) \le \vd(S,i).
\end{cases}
\]
which is the set of IPs due to a player in a size-$i$ coalition betraying optimally.
When $\calM(S,i) \le \vd(S,i)$, the player is not motivated to betray, so the set of the $i$-betrayal descendants is empty.
By viewing the IPs as vertices in a directed graph, and there are directed edges from each $S$ to IPs in $\cup_{i\in S} \calD(S,i)$,
any sink vertex in this graph (i.e., IPs $S$ where $\cup_{i\in S} \calD(S,i)$ empty) corresponds to a stable coalition structure.
The PAR value $\vp(S,i)$ is the least possible reward of a player in size-$i$ coalition at any sink which is descendant from $S$ in the above graph,
and can be defined as
\[
\vp(S,i) ~:=~ 
\begin{cases}
\min \left\{ \min_{S'\in \cup_{k\in S-i}\calD(S,k)} \vp(S',i) ~,~ \max\{\vd(S,i)~,~\calM(S,i)\} \right\}, & \text{ if }\cup_{k\in S-i}\calD(S,k)\neq \emptyset\\
\max\{\vd(S,i)~,~\calM(S,i)\}, & \text{ otherwise.}
\end{cases}
\]

In the next page, we list the sink descendants from the grand coalition, when $3\le n\le 80$ and the second-stage game is Cournot competition.

\newpage

\begin{verbatim}
+----------------------------------------------------------------------+
|  n |      Cournot Linear Price      |        Tullock Contest         |
------------------------------------------------------------------------
|  3 |               3                |               3                |
------------------------------------------------------------------------
|  4 |               4                |               4                |
------------------------------------------------------------------------
|  5 |             2,2,1              |              4,1               |
------------------------------------------------------------------------
|  6 |             3,2,1              |               6                |
------------------------------------------------------------------------
|  7 |             3,3,1              |               7                |
------------------------------------------------------------------------
|  8 |               8                |               8                |
------------------------------------------------------------------------
|  9 |               9                |              8,1               |
------------------------------------------------------------------------
| 10 |               10               |              9,1               |
------------------------------------------------------------------------
| 11 |               11               |              10,1              |
------------------------------------------------------------------------
| 12 |             5,5,2              |              11,1              |
------------------------------------------------------------------------
| 13 |               13               |               13               |
------------------------------------------------------------------------
| 14 |             6,6,2              |              13,1              |
------------------------------------------------------------------------
| 15 |             7,7,1              |               15               |
------------------------------------------------------------------------
| 16 |             9,6,1              |               16               |
------------------------------------------------------------------------
| 17 |             9,7,1              |            9,6,1,1             |
------------------------------------------------------------------------
| 18 |             10,7,1             |            9,7,1,1             |
------------------------------------------------------------------------
| 19 |           5,5,5,3,1            |            10,7,1,1            |
------------------------------------------------------------------------
| 20 |             11,8,1             |               20               |
------------------------------------------------------------------------
| 21 |           6,6,6,2,1            |            11,8,1,1            |
------------------------------------------------------------------------
| 22 |           7,7,6,1,1            |               22               |
------------------------------------------------------------------------
| 23 |           7,7,7,1,1            |               23               |
------------------------------------------------------------------------
| 24 |           8,8,6,1,1            |               24               |
------------------------------------------------------------------------
| 25 |         5,5,5,5,3,1,1          |               25               |
------------------------------------------------------------------------
| 26 |          7,7,7,3,1,1           |               26               |
------------------------------------------------------------------------
| 27 |          7,7,7,4,1,1           |               27               |
------------------------------------------------------------------------
| 28 |         6,6,6,6,2,1,1          |               28               |
------------------------------------------------------------------------
| 29 |        5,5,5,5,5,2,1,1         |               29               |
------------------------------------------------------------------------
| 30 |        5,5,5,5,5,3,1,1         |               30               |
|    |          8,8,7,5,1,1           |                                |
------------------------------------------------------------------------
| 31 |         7,7,7,7,1,1,1          |               31               |
------------------------------------------------------------------------
| 32 |         8,8,8,5,1,1,1          |               32               |
------------------------------------------------------------------------
| 33 |        7,7,7,7,2,1,1,1         |               33               |
------------------------------------------------------------------------
| 34 |        7,7,7,7,3,1,1,1         |               34               |
------------------------------------------------------------------------
| 35 |       6,6,6,6,6,2,1,1,1        |               35               |
------------------------------------------------------------------------
| 36 |        8,8,8,8,1,1,1,1         |              30,6              |
------------------------------------------------------------------------
| 37 |        8,8,8,8,2,1,1,1         |             25,9,3             |
------------------------------------------------------------------------
| 38 |      6,6,6,6,6,4,1,1,1,1       |               38               |
------------------------------------------------------------------------
| 39 |      6,6,6,6,6,5,1,1,1,1       |              36,3              |
------------------------------------------------------------------------
| 40 |      6,6,6,6,6,6,1,1,1,1       |              36,4              |
------------------------------------------------------------------------
| 41 |       8,8,8,8,5,1,1,1,1        |              36,5              |
------------------------------------------------------------------------
| 42 |     6,6,6,6,6,6,2,1,1,1,1      |              38,4              |
------------------------------------------------------------------------
| 43 |     6,6,6,6,6,6,3,1,1,1,1      |              38,5              |
------------------------------------------------------------------------
| 44 |     6,6,6,6,6,6,4,1,1,1,1      |            25,15,4             |
------------------------------------------------------------------------
| 45 |    6,6,6,6,6,6,4,1,1,1,1,1     |               45               |
------------------------------------------------------------------------
| 46 |    6,6,6,6,6,6,5,1,1,1,1,1     |              42,4              |
------------------------------------------------------------------------
| 47 |      9,9,8,8,8,1,1,1,1,1       |              42,5              |
------------------------------------------------------------------------
| 48 |     8,8,8,8,7,4,1,1,1,1,1      |              42,6              |
------------------------------------------------------------------------
| 49 |               49               |              47,2              |
------------------------------------------------------------------------
| 50 |             28,22              |              49,1              |
+----------------------------------------------------------------------+
\end{verbatim}

\newpage

\begin{verbatim}
 3: [(3,)]
 4: [(4,)]
 5: [(2, 2, 1)]
 6: [(3, 2, 1)]
 7: [(3, 3, 1)]
 8: [(8,)]
 9: [(9,)]
10: [(10,)]
11: [(11,)]
12: [(5, 5, 2)]
13: [(13,)]
14: [(6, 6, 2)]
15: [(7, 7, 1)]
16: [(9, 6, 1)]
17: [(9, 7, 1)]
18: [(10, 7, 1)]
19: [(5, 5, 5, 3, 1)]
20: [(11, 8, 1)]
21: [(6, 6, 6, 2, 1)]
22: [(7, 7, 6, 1, 1)]
23: [(7, 7, 7, 1, 1)]
24: [(8, 8, 6, 1, 1)]
25: [(5, 5, 5, 5, 3, 1, 1)]
26: [(7, 7, 7, 3, 1, 1)]
27: [(7, 7, 7, 4, 1, 1)]
28: [(6, 6, 6, 6, 2, 1, 1)]
29: [(5, 5, 5, 5, 5, 2, 1, 1)]
30: [(5, 5, 5, 5, 5, 3, 1, 1), (8, 8, 7, 5, 1, 1)]
31: [(7, 7, 7, 7, 1, 1, 1)]
32: [(8, 8, 8, 5, 1, 1, 1)]
33: [(7, 7, 7, 7, 2, 1, 1, 1)]
34: [(7, 7, 7, 7, 3, 1, 1, 1)]
35: [(6, 6, 6, 6, 6, 2, 1, 1, 1)]
36: [(8, 8, 8, 8, 1, 1, 1, 1)]
37: [(8, 8, 8, 8, 2, 1, 1, 1)]
38: [(6, 6, 6, 6, 6, 4, 1, 1, 1, 1)]
39: [(6, 6, 6, 6, 6, 5, 1, 1, 1, 1)]
40: [(6, 6, 6, 6, 6, 6, 1, 1, 1, 1)]
41: [(8, 8, 8, 8, 5, 1, 1, 1, 1)]
42: [(6, 6, 6, 6, 6, 6, 2, 1, 1, 1, 1)]
43: [(6, 6, 6, 6, 6, 6, 3, 1, 1, 1, 1)]
44: [(6, 6, 6, 6, 6, 6, 4, 1, 1, 1, 1)]
45: [(6, 6, 6, 6, 6, 6, 4, 1, 1, 1, 1, 1)]
46: [(6, 6, 6, 6, 6, 6, 5, 1, 1, 1, 1, 1)]
47: [(9, 9, 8, 8, 8, 1, 1, 1, 1, 1)]
48: [(8, 8, 8, 8, 7, 4, 1, 1, 1, 1, 1)]
49: [(49,)]
50: [(28, 22)]
51: [(51,)]
52: [(52,)]
53: [(53,)]
54: [(7, 7, 7, 7, 7, 7, 6, 1, 1, 1, 1, 1, 1)]
55: [(32, 23)]
56: [(56,)]
57: [(25, 20, 12)]
58: [(36, 22)]
59: [(36, 23)]
60: [(60,)]
61: [(34, 27)]
62: [(39, 23)]
63: [(37, 26)]
64: [(38, 26)]
65: [(39, 26)]
66: [(33, 25, 8), (21, 21, 16, 8)]
67: [(27, 27, 13)]
68: [(27, 27, 14)]
69: [(36, 24, 9)]
70: [(30, 30, 10)]
71: [(30, 30, 11)]
72: [(25, 25, 18, 4)]
73: [(33, 33, 7)]
74: [(40, 30, 4)]
75: [(27, 27, 17, 4)]
76: [(36, 31, 9)]
77: [(20, 20, 20, 13, 4)]
78: [(29, 27, 19, 3)]
79: [(39, 39, 1)]
80: [(21, 21, 21, 13, 4)]
\end{verbatim}

\hide{\emph{active value function} and \emph{passive value function} respectively.
These values will be used to define \emph{stable coalition structure}. Let $S$ be an IP of $n$, and let $i\in S$.
$\vd(S,i)$ is the reward received by any player in a coalition of size $i$ when the IP and its corresponding CS is fixed.

We will define $\va(S,i)$ and $\vp(S,i)$ recursively, with the definition of $\vp(S,i)$ being particularly intricate.
Before proceeding to the formal definitions, we first give some intuitive discussions of them.
$\va(S,i)$ assumes that a player in a size-$i$ coalition is \emph{determined} to betray, i.e., she will pull $j$ players (counting herself),
where $1\le j \le \floor{i/2}$, to part way with the other players in her current coalition.
The player can choose how to betray by choosing $j$ optimally, for which she anticipates the consequence of her betrayal pessimistically,
as further betrayals might happen in \emph{any} coalition, whenever it is in the interest of the betrayer(s).

$\vp(S,i)$ also concerns a player in a size-$i$ coalition, but unlike before, now she is not in first hand to initiate a betrayal.
Instead, she anticipates pessimistically the worst possible reward she might receive when players in other coalitions are motivated to betray.
Only when there is no such player, she can then choose either not to betray and receives the default value of the current CS,
or to betray optimally as we discussed about active value in the previous paragraph.

Next, we make two attempts of formal definitions of $\va,\vp$. The first attempt is natural apparently but has a mathematical problem of circular dependency.
This forces us to turn to an intricate but appropriate definition of $\vp$ in the second attempt.
Before moving on, we specify a few notations which will help with simplifying our presentation:
\begin{itemize}[leftmargin=0.25in]
\item Given a multiset $S$ and $i$, $S+i$ is a shorthand of $S\cup\multiset{i}$, which denote the multiset obtained from $S$ by adding one more occurrence of $i$.
For example, when $S=\multiset{3,3,2}$, then $S+3 = \multiset{3,3,3,2}$, and $S+1 = \multiset{3,3,2,1}$.
\item Given two multiset $S$ and $T$, let $S\setminus T$ denote the multiset formed by removing from $S$ one occurrence of each element that appears in $T$,
for as many times as it appears in $T$. For example, when $S=\multiset{2,2,2,2,2,1,1}$, $T_1 = \multiset{2,2,1}$ and $T_2 = \multiset{2,1,1,1}$,
then $S\setminus T_1 = \multiset{2,2,2,1}$ and $S\setminus T_2 = \multiset{2,2,2,2}$.
\item Given a multiset $S$, $i\in S$ and $1\le j<i$, let $\calB(S,i,j)$ denote the multiset formed by splitting an occurrence of $i$ in $S$ into $j$ and $i-j$.
For example, when $S=\multiset{5,5,2}$, $\calB(S,5,2) = \multiset{5,3,2,2}$.
\end{itemize}

\paragraph{First attempt and its circular dependency problem.}
To define $\va,\vp$ recursively, we go from CSs with the most number of coalitions to the least.
Let $U$ be the IP $\multiset{1,1,\ldots,1}$, where $1$ appears $n$ times.
Since no further betrayal is possible from $U$, we set $\va(U,1) = -\infty$ and $\vp(T,1) = \vd(T,1)$.
In general, since no betrayal is possible for a size-$1$ coalition, we set $\va(S,1) = -\infty$ for any IP $S$ with $S\ni 1$.
Now consider any IP $S$, $i\in S$ and $1\le j\le \floor{i/2}$. After a player in the size-$i$ coalition betrays with other $j-1$ players,
a new CS with IP $\calB(S,i,j)$ is formed. Since the player has no control of what happens afterwards, she considers the value she will get pessimistically,
which is $\vp(\calB(S,i,j),j)$. The player chooses the best $j$ that maximizes this passive value. Thus, our formal definition of $\va(S,i)$ is
\begin{equation}\label{eq:activeValue}
\va(S,i) ~=~ \max_{1\le j\le \floor{i/2}}~\vp(\calB(S,i,j),j)~.
\end{equation}
We also define
\[
\alpha(S,i) ~=~ \argmax_{1\le j\le \floor{i/2}} \vp(\calB(S,i,j),j)~.
\]
If there are multiple $j$'s attaining the maximum $\vp(\calB(S,i,j),j)$, $\alpha(S,i)$ equals to the smallest such $j$,
for it is always easier to form a coalition of a smaller size.

To define $\vp(S,i)$ formally, observe that players in other coalitions are interested to betray only when they can gain more reward by doing so.
If none of these players are interested to betray, then the player in the size-$i$ coalition can choose either betray or not, depending on which of
$\vp(\calB(S,i,j),j)$ and $\vd(S,i)$ is larger. This suggests the following definition of $\vp(S,i)$.
\[
\vp(S,i) ~=~ 
\begin{cases}
\min_{k\in T(S,i)}~\vp(S(k,\alpha(S,k)),i)~,&\text{if }T(S,i)\neq \emptyset;\\
~&~\\
\max \left\{ \vp(\calB(S,i,j),j)~,~\vd(S,i) \right\}~,&\text{otherwise},
\end{cases}
\]
where $T(S,i)=\{k\in S\setminus\{i\}~|~\vp(S,k) < \va(S,k)\}$. However, this definition of $\vp(S,i)$ is problematic.
The definition of $T(S,i)$ involves $\vp(S,k)$,
while in the definition of $\vp(S,k)$, it involves $T(S,k)$ which in turn involves $\vp(S,i)$, resulting in a circular dependency.

\paragraph{Second attempt: eliminating circular dependency.} To eliminate the circular dependency, we first need to identify its source:
the players are presumed to make decisions \emph{simultaneously}. However, if players in different coalitions make decision following some time order,
the outcome can vary depending on the time order, as illustrated by the following example.

\boxexample{Suppose $n=4$. Currently there are two size-$2$ coalitions, i.e., the corresponding IP is $\multiset{2,2}$. Suppose we have the following default values:
$\vd(\multiset{2,2},2) = 2$, $\vd(\multiset{2,1,1},2) = 4$, $\vd(\multiset{2,1,1},1) = x$ where $x$ will be specified later, and $\vd(\multiset{1,1,1,1},1) = 0$.
If $x=1$, no player is motivated to initiate a betrayal. If $x=5$, all players in both coalition are eager to betray their coalitions.

The tricky bit is when $x=3$. Although the reward of a player betraying her current coalition will go up from $2$ to $3$,
she would prefer the other coalition to break, which raises her reward to $4$.

Now, suppose one player in each coalition can initiate a betrayal, and they are put in some time order to decide betraying her own coalition or not.
When $x=1$, no player betrays. When $x=5$, the first player betray. When $x=3$, the first player will not betray, leaving the second player betraying as best move.}

While endowing a time order is justified, it is unclear which time order which be endowed. Our approach is to make the pessimistic anticipation of \emph{arbitrary} order.
In the study of iterative systems, this is called \emph{asynchrony}.}

\end{document}
